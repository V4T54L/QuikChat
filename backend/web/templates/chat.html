<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QuikChat</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-900 text-gray-200 font-sans">
    <div id="notification-container" class="fixed bottom-5 right-5 z-50"></div>

    <div class="flex h-screen">
        <!-- Sidebar -->
        <aside class="w-80 bg-gray-800 flex flex-col">
            <!-- Profile Section -->
            <div id="profile-container" class="flex items-center p-4 border-b border-gray-700">
                <!-- JS will render this -->
            </div>

            <!-- Friends Section -->
            <div id="friends-container" class="p-4 border-b border-gray-700">
                <div class="flex justify-between items-center mb-2">
                    <h2 class="text-lg font-semibold text-white">Friends</h2>
                    <button id="add-friend-btn" class="bg-blue-500 hover:bg-blue-600 text-white px-2 py-1 text-xs rounded">Add Friend</button>
                </div>
                <ul id="friends-list" class="space-y-1 max-h-48 overflow-y-auto">
                    <!-- JS will render this -->
                </ul>
            </div>

            <!-- Groups Section -->
            <div id="groups-container" class="p-4 flex-grow overflow-y-auto">
                <div class="flex justify-between items-center mb-2">
                    <h2 class="text-lg font-semibold text-white">Groups</h2>
                    <div>
                        <button id="find-group-btn" class="bg-gray-600 hover:bg-gray-500 text-white px-2 py-1 text-xs rounded mr-1">Find</button>
                        <button id="create-group-btn" class="bg-green-500 hover:bg-green-600 text-white px-2 py-1 text-xs rounded">Create</button>
                    </div>
                </div>
                <ul id="groups-list" class="space-y-2">
                    <!-- JS will render this -->
                </ul>
            </div>

            <!-- Pending Requests Section -->
            <div id="pending-requests-container" class="p-4 border-t border-gray-700">
                <h3 class="text-md font-semibold text-white mb-2">Pending Requests</h3>
                <ul id="pending-requests-list" class="space-y-1 max-h-32 overflow-y-auto">
                    <!-- JS will render this -->
                </ul>
            </div>

            <!-- User Actions -->
            <div class="p-4 border-t border-gray-700 mt-auto">
                <form id="profile-update-form" class="space-y-2 text-sm">
                    <input type="text" name="username" placeholder="New Username" class="w-full bg-gray-700 p-2 rounded border border-gray-600 focus:outline-none focus:border-blue-500">
                    <input type="password" name="password" placeholder="New Password" class="w-full bg-gray-700 p-2 rounded border border-gray-600 focus:outline-none focus:border-blue-500">
                    <input type="file" name="profile_pic" class="w-full text-gray-400 file:mr-4 file:py-1 file:px-2 file:rounded file:border-0 file:text-xs file:font-semibold file:bg-gray-600 file:text-gray-300 hover:file:bg-gray-500">
                    <button type="submit" class="w-full bg-indigo-500 hover:bg-indigo-600 text-white p-2 rounded">Update Profile</button>
                </form>
                <button id="logout-button" class="w-full mt-2 bg-red-600 hover:bg-red-700 text-white p-2 rounded">Logout</button>
            </div>
        </aside>

        <!-- Main Chat Area -->
        <main class="flex-1 flex flex-col bg-gray-900">
            <div id="chat-container" class="flex flex-col h-full hidden">
                <!-- Chat Header -->
                <header id="chat-header" class="flex items-center p-4 bg-gray-800 border-b border-gray-700">
                    <!-- JS will render this -->
                </header>

                <!-- Messages -->
                <div id="messages-container" class="flex-grow overflow-y-auto p-4 space-y-4">
                    <!-- JS will render messages here -->
                </div>

                <!-- Message Input -->
                <form id="message-form" class="p-4 bg-gray-800 border-t border-gray-700">
                    <input type="text" name="message" placeholder="Type a message..." autocomplete="off"
                           class="w-full bg-gray-700 p-3 rounded-lg border border-gray-600 focus:outline-none focus:border-blue-500 text-white">
                </form>
            </div>
            <div id="welcome-screen" class="flex items-center justify-center h-full">
                <p class="text-gray-500 text-xl">Select a conversation to start chatting</p>
            </div>
        </main>
    </div>

    <!-- Modals -->
    <!-- Add Friend Modal -->
    <div id="add-friend-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden">
        <div class="modal-overlay absolute w-full h-full"></div>
        <div class="bg-gray-800 p-6 rounded-lg z-10 w-full max-w-md">
            <h3 class="text-xl font-semibold mb-4">Add a Friend</h3>
            <form id="add-friend-form">
                <input type="text" name="username" placeholder="Enter username" class="w-full bg-gray-700 p-2 rounded border border-gray-600 mb-4" required>
                <div class="flex justify-end">
                    <button type="button" class="modal-close bg-gray-600 text-white px-4 py-2 rounded mr-2">Cancel</button>
                    <button type="submit" class="bg-blue-500 text-white px-4 py-2 rounded">Send Request</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Create Group Modal -->
    <div id="create-group-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden">
        <div class="modal-overlay absolute w-full h-full"></div>
        <div class="bg-gray-800 p-6 rounded-lg z-10 w-full max-w-md">
            <h3 class="text-xl font-semibold mb-4">Create a Group</h3>
            <form id="create-group-form" class="space-y-4">
                <input type="text" name="handle" placeholder="Group Handle (e.g., #cooldevs)" class="w-full bg-gray-700 p-2 rounded border border-gray-600" required>
                <input type="text" name="name" placeholder="Group Name" class="w-full bg-gray-700 p-2 rounded border border-gray-600" required>
                <input type="file" name="group_photo" class="w-full text-gray-400 file:mr-4 file:py-1 file:px-2 file:rounded file:border-0 file:text-xs file:font-semibold file:bg-gray-600 file:text-gray-300 hover:file:bg-gray-500">
                <div class="flex justify-end">
                    <button type="button" class="modal-close bg-gray-600 text-white px-4 py-2 rounded mr-2">Cancel</button>
                    <button type="submit" class="bg-green-500 text-white px-4 py-2 rounded">Create</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Search Group Modal -->
    <div id="search-group-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden">
        <div class="modal-overlay absolute w-full h-full"></div>
        <div class="bg-gray-800 p-6 rounded-lg z-10 w-full max-w-lg">
            <h3 class="text-xl font-semibold mb-4">Find and Join Groups</h3>
            <input type="search" id="group-search-input" placeholder="Search by handle..." class="w-full bg-gray-700 p-2 rounded border border-gray-600 mb-4">
            <div id="group-search-results" class="max-h-64 overflow-y-auto">
                <!-- Search results will be rendered here -->
            </div>
            <div class="flex justify-end mt-4">
                <button type="button" class="modal-close bg-gray-600 text-white px-4 py-2 rounded">Close</button>
            </div>
        </div>
    </div>

    <script type="module" src="/static/js/main.js"></script>
</body>
</html>
